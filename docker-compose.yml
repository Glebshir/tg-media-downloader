version: '3.8'

services:
  bot:
    image: ghcr.io/glebshir/tg-media-downloader:latest
    restart: unless-stopped
    network_mode: host
    environment:
      - BOT_TOKEN=${BOT_TOKEN}
      - MAX_FILE_SIZE=${MAX_FILE_SIZE:-52428800}
      - YTDLP_COOKIEFILE=${YTDLP_COOKIEFILE:-/app/downloads/cookies.txt}
      - INSTAGRAM_USERNAME=${INSTAGRAM_USERNAME:-}
      - INSTAGRAM_PASSWORD=${INSTAGRAM_PASSWORD:-}
      - HTTP_PROXY=${HTTP_PROXY:-}
      - HTTPS_PROXY=${HTTPS_PROXY:-}
      - http_proxy=${http_proxy:-}
      - https_proxy=${https_proxy:-}
      - ALL_PROXY=${ALL_PROXY:-}
      - NO_PROXY=${NO_PROXY:-localhost,127.0.0.1}
    volumes:
      - ./downloads:/app/downloads
